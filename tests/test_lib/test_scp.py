import pytest
from bot.wikis.lib.scp import SCP


@pytest.mark.asyncio
async def test_page():
    scp = SCP()
    object = await scp.page("http://scp-ru.wikidot.com/scp-1488")

    assert object.image == "http://scp-ru.wdfiles.com/local--files/scp-1488/wtfturtle3.jpg"
    assert object.href == "http://scp-ru.wikidot.com/scp-1488"
    assert object.text == """<b>SCP-1488 - Частично роботизированные черепахи</b>\n\n<strong>Объект №:</strong> SCP-1488\n<strong>Класс объекта:</strong> Евклид\n<strong>Особые условия содержания:</strong> SCP-1488-001 - SCP-1488-2141 содержатся в Зоне 15 в подземном загоне с искусственным освещением и климат-контролем, имитирующим условия мексиканской области Больсон де Мапими с учётом сезонных колебаний. Пища и вода доставляются в загон по мере необходимости через защищённые коридоры, оснащённые освинцованными дверями. В загоне установлены антенны для приёма передач особей SCP-1488; каждые 24 часа исследователь изымает записи передачи. В центре загона установлено орудие для электромагнитного импульса, постоянно заряженное и готовое к применению.\nВ различных районах на севере Мексики дислоцированы шесть роботизированных устройств удалённого захвата (R3V-1488-1 - 6) для каталогизации и захвата предполагаемых особей SCP-1488 с целью пометить и выпустить их, либо доставить в Зону 15 для классификации как SCP. Лаборантам, назначенным на SCP-1488, следует помнить, что устройства R3V регулярно выходят на связь с Зоной 15, и что все сообщения должны быть рассмотрены и запротоколированы в течение 24 часов.\nПоскольку большое число особей SCP-1488 считаются необнаруженными, 2 лаборанта назначены для регулярного мониторинга интернет-аукционов, заповедников и нелицензионных зоомагазинов и оповещения руководителей проекта в случае появления особей SCP-1488. Ввиду интереса к данному виду организаций по сохранению и восстановлению дикой природы как минимум в одно из значительных агентств, контролирующих эти проекты, внедрены представители Фонда.\n<strong>Описание:</strong> Особи SCP-1488 изначально были идентифицированы, как особи вида <em>Gopherus flavomarginatus</em>, мексиканской гигантской черепахи, усовершенствованные путём имплантации электронных и механических компонентов. Однако более подробное исследование показало, что наиболее старые особи, в среднем, содержат большее количество искусственных компонентов, и что аномальные родители способны производить неаномальное потомство, а недавние археологические открытия2 указывают, что в прошлом особи имели гораздо больше синтетических компонентов, нежели сейчас. Эти данные, в дополнение к огромному количеству обнаруженных особей3, убедительно свидетельствуют, что вид <em>G. flavomarginatus</em> большей частью или даже полностью представлен роботизированными машинами в различной мере ассимилированных неизвестным на сегодня способом среди представителей рода <em>Gopherus</em>.\nВ то время как большинство гигантских черепах, отнесённых к SCP-1488, являются полностью биологическими, неаномальными и полностью интегрированными в экосистему бассейна Мапими, около 8,5% обнаруженных до сих пор особей обладают "рудиментарными коммуникационными устройствами" в виде составных металлических сфер 18 мм в диаметре со сложной внутренней структурой, встроенными под самой высокой точкой панциря. Почти все обнаруженные устройства, по-видимому, функционируют, периодически излучая сигналы в диапазоне ████-████. Коммуникационные устройства являются наиболее распространённой аномалией SCP-1488, но часто они также сопровождаются одной или более из нижеперечисленных:\n• Одна или несколько частично автоматизированных конечностей\n• Подпанцирные солнечные батареи\n• Серия откалиброванных оптических линз\n• Спектроскопические трубы с остатками излучателей альфа-частиц\n• Инструменты для рытья или экскавации\n• Электроприводные магнитные катушки\n• Инструменты для сверления с цилиндрическим или долотообразным буром\nСледует отметить, что вышеперечисленные элементы всегда обнаруживались в нерабочем состоянии и во многих случаях были идентифицированы только по форме.\n<strong>Инцидент 1488-Дельта:</strong> ██.██.199█ два из трёх активных на тот момент устройств R3V-1488, а также приёмники Зоны 15 одновременно зарегистрировали значительное увеличение активности на радиочастоте ████ общей продолжительностью 132 секунд. Примерно 70 часов спустя был получен "ответ" из определённо установленной точки α4. = ██h██m██s со склонением ███°██′5. В отличие от относите"""  #noqa
